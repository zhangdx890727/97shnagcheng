angular.module("myApp",["ionic","myApp.slideBox","myApp.httpFactory","myApp.tabs","myApp.home","myApp.integral","myApp.league","myApp.person","myApp.homeDetail","myApp.personOrder","myApp.personCollect","myApp.personShoppingCar","myApp.personIntegral","myApp.personAddress","myApp.personPay","myApp.personConcern"]).config(["$stateProvider","$urlRouterProvider","$ionicConfigProvider",function(o,e,n){n.tabs.position("bottom"),n.tabs.style("standard"),n.navBar.alignTitle("center"),o.state("tabs",{url:"/tabs",abstract:!0,templateUrl:"tabs.html",controller:"tabsController"}),e.otherwise("/tabs/home")}]).directive("showTabs",["$rootScope",function(o){return{restrict:"EAC",link:function(e,n){console.log("hello"),o.hideTabs=!1}}}]).directive("hideTabs",["$rootScope",function(o){return{restrict:"EAC",link:function(e,n){o.hideTabs=!0}}}]),angular.module("myApp.home",[]).config(["$stateProvider",function(o){o.state("tabs.home",{url:"/home",views:{"tabs-home":{templateUrl:"home.html",controller:"homeController"}}})}]).controller("homeController",["$scope","$location","$ionicViewSwitcher","$ionicModal","$timeout","$rootScope","HttpFactory",function(o,e,n,t,r,l,a){o.home={bannumArray:[],goodsArray:[]},o.slidBox=!0;var s=function(){o.slidBox=!1;var e="http://114.112.94.166/sunny/wap/api/getGoods";a.getData(e).then(function(e){console.log(e),o.slidBox=!0,o.home.bannumArray=e.bannerData,console.log(o.home.bannumArray),o.home.goodsArray=e.goodsData,console.log(o.home.goodsArray)})};s(),o.doRefresh=function(){s(),o.$broadcast("scroll.refreshComplete")},o.isShowInfinite=!0,o.loadMore=function(){url="http://114.112.94.166/sunny/wap/api/getGoods",a.getData(url).then(function(e){o.home.goodsArray=o.home.goodsArray.concat(e.goodsData)}),o.$broadcast("scroll.infiniteScrollComplete")},o.goToHomeDetail=function(){e.path("/homeDetail"),n.nextDirection("forward")};var i=angular.element(document.getElementById("rong-widget-minbtn"));o.number=1,o.addBtn=function(){o.number++},o.reduceBtn=function(){o.number--,o.number<=1&&(o.number=1)},t.fromTemplateUrl("modalCart.html",{scope:o,animation:"slide-in-up"}).then(function(e){o.modal=e}),o.openModal=function(e){o.modal.show(),o.goods=e,i.css("display","none")},o.closeModal=function(){o.modal.hide(),r(function(){i.css("display","block")},300)},o.$on("$destroy",function(){o.modal.remove()}),o.doSearch=function(o){o?console.log("搜索关键字为："+o):console.log("搜索值为空")},o.addToShopCart=function(){console.log("加入购物车")},o.purchaseNow=function(){console.log("立即购买")}}]),angular.module("myApp.homeDetail",[]).config(["$stateProvider",function(o){o.state("homeDetail",{url:"/homeDetail",templateUrl:"homeDetail.html",controller:"homeDetailController"})}]).controller("homeDetailController",["$scope",function(o){}]),angular.module("myApp.integral",[]).config(["$stateProvider",function(o){o.state("tabs.integral",{url:"/integral",views:{"tabs-integral":{templateUrl:"integral.html",controller:"integralController"}}})}]).controller("integralController",["$scope","$ionicModal","$ionicViewSwitcher","$location","$timeout","$rootScope","HttpFactory",function(o,e,n,t,r,l,a){o.$on("$ionicView.beforeEnter",function(){r(function(){l.hideTabs=!1},300)}),o.integral={bannumArray:[],goodsArray:[]},o.slidBox=!0;var s=function(){o.slidBox=!1;var e="http://114.112.94.166/sunny/wap/api/getGoods";a.getData(e).then(function(e){console.log(e),o.slidBox=!0,o.integral.bannumArray=e.bannerData,console.log(o.integral.bannumArray),o.integral.goodsArray=e.goodsData,console.log(o.integral.goodsArray)})};s(),o.doRefresh=function(){s(),o.$broadcast("scroll.refreshComplete")},o.isShowInfinite=!0,o.loadMore=function(){url="http://114.112.94.166/sunny/wap/api/getGoods",a.getData(url).then(function(e){o.integral.goodsArray=o.integral.goodsArray.concat(e.goodsData)}),o.$broadcast("scroll.infiniteScrollComplete")},o.goToHomeDetail=function(){t.path("/homeDetail"),n.nextDirection("forward")};var i=angular.element(document.getElementById("rong-widget-minbtn"));o.number=1,o.addBtn=function(){o.number++,o.number>=o.goods.goods_number&&(o.number=o.goods.goods_number)},o.reduceBtn=function(){o.number--,o.number<=1&&(o.number=1)},e.fromTemplateUrl("modalCart.html",{scope:o,animation:"slide-in-down"}).then(function(e){o.modal=e}),o.openModal=function(e){o.modal.show(),o.goods=e,i.css("display","none")},o.closeModal=function(){o.modal.hide(),r(function(){i.css("display","block")},300)},o.$on("$destroy",function(){o.modal.remove()}),o.doSearch=function(o){o?console.log("搜索关键字为："+o):console.log("搜索值为空")},o.addToShopCart=function(){console.log("加入购物车")},o.purchaseNow=function(){console.log("立即购买")}}]),angular.module("myApp.league",[]).config(["$stateProvider",function(o){o.state("tabs.league",{url:"/league",views:{"tabs-league":{templateUrl:"league.html",controller:"leagueController"}}})}]).controller("leagueController",["$scope","$rootScope","$timeout","HttpFactory",function(o,e,n,t){var r="http://114.112.94.166/sunny/wap/api/franchise";t.getData(r).then(function(e){o.leagueArray=e.data,console.log(o.leagueArray)})}]),angular.module("myApp.personAddress",[]).config(["$stateProvider",function(o){o.state("tabs.personAddress",{url:"/personAddress",views:{"tabs-person":{templateUrl:"personAddress.html",controller:"personAddressController"}}})}]).controller("personAddressController",["$scope","$ionicModal","$rootScope","$ionicPopup","HttpFactory",function(o,e,n,t,r){function l(e){o.modal.show();var n=angular.element(document.querySelector("#address_modal")),t=angular.element(document.querySelector("#modalTitle"));n.on("click",function(){o.modal.hide()}),"新增地址"==e.target.innerText?t[0].innerText="新增收货地址":t[0].innerText="编辑收货地址"}function a(){o.modal.hide()}function s(e){for(var n=0;n<o.address.listArray.length;n++)o.address.listArray[n].default=!1;o.address.listArray[e].default=!0,console.log(e)}function i(e){t.show({cssClass:"myOrder",template:"确认要删除该地址吗?",scope:o,buttons:[{text:"取消",type:""},{text:"确定",type:"",onTap:function(n){o.address.listArray.splice(e,1),o.address.listArray.length>=1&&(o.address.listArray[0].default=!0)}}]})}e.fromTemplateUrl("addressModal.html",{scope:o,animation:"slide-in-up"}).then(function(e){o.modal=e}),o.address={listArray:[],openModal:l,closeModal:a,changeDefault:s,showConfirm:i};var c="http://114.112.94.166/sunny/wap/api/uAddress";r.getData(c).then(function(e){console.log(e.addressData),o.address.listArray=e.addressData,o.address.listArray[0].default=!0}),o.$on("$destroy",function(){o.modal.remove()}),o.$on("$ionicView.beforeEnter",function(){n.hideTabs=!0})}]),angular.module("myApp.personCollect",[]).config(["$stateProvider",function(o){o.state("tabs.personCollect",{url:"/personCollect",views:{"tabs-person":{templateUrl:"personCollect.html",controller:"personCollectController"}}})}]).controller("personCollectController",["$scope","$rootScope","$ionicPopup","$ionicLoading","$timeout","HttpFactory",function(o,e,n,t,r,l){function a(e){console.log(e),console.log("加入购物车1");n.show({cssClass:"myOrder",template:"确认要把该商品加入购物车吗?",scope:o,buttons:[{text:"取消",type:""},{text:"确定",type:"",onTap:function(e){o.show(),r(function(){o.hide()},1e3)}}]})}function s(e){console.log(e);n.show({cssClass:"myOrder",template:"确认要删除该地址吗?",scope:o,buttons:[{text:"取消",type:""},{text:"确定",type:"",onTap:function(n){o.coll.collectArray.splice(e,1)}}]})}o.$on("$ionicView.beforeEnter",function(){e.hideTabs=!0}),o.coll={collectArray:[],showConfirm:s,addShopping:a};var i="http://114.112.94.166/sunny/wap/api/ucollection";l.getData(i).then(function(e){console.log(e.collectionData),o.coll.collectArray=e.collectionData}),o.show=function(){t.show({template:"已加入购物车"})},o.hide=function(){t.hide()}}]),angular.module("myApp.personConcern",[]).config(["$stateProvider",function(o){o.state("tabs.personConcern",{url:"/personConcern",views:{"tabs-person":{templateUrl:"personConcern.html",controller:"personConcernController"}}})}]).controller("personConcernController",["$scope","$rootScope",function(o,e){o.$on("$ionicView.beforeEnter",function(){e.hideTabs=!0})}]),angular.module("myApp.person",[]).config(["$stateProvider",function(o){o.state("tabs.person",{url:"/person",views:{"tabs-person":{templateUrl:"person.html",controller:"personController"}}})}]).controller("personController",["$scope","$state","$ionicViewSwitcher","$rootScope","$timeout",function(o,e,n,t,r){o.$on("$ionicView.beforeEnter",function(){r(function(){t.hideTabs=!1},300)}),o.person={userName:"你有梦想吗?",creditNum:"3800"},o.showOrder=function(){e.go("tabs.personOrder"),n.nextDirection("forward"),console.log("我的订单")},o.showCollect=function(){e.go("tabs.personCollect"),n.nextDirection("forward"),console.log("我的收藏")},o.showShoppingCar=function(){e.go("tabs.personShoppingCar"),n.nextDirection("forward"),console.log("我的购物车")},o.showIntegral=function(){e.go("tabs.personIntegral"),n.nextDirection("forward"),console.log("我的积分")},o.showAddress=function(){e.go("tabs.personAddress"),n.nextDirection("forward"),console.log("我的收货地址")},o.showPay=function(){e.go("tabs.personPay"),n.nextDirection("forward"),console.log("我的支付记录")},o.showConcern=function(){e.go("tabs.personConcern"),n.nextDirection("forward"),console.log("我的推荐")}}]),angular.module("myApp.personIntegral",[]).config(["$stateProvider",function(o){o.state("tabs.personIntegral",{url:"/personIntegral",views:{"tabs-person":{templateUrl:"personIntegral.html",controller:"personIntegralController"}}})}]).controller("personIntegralController",["$scope","$state","$rootScope","HttpFactory",function(o,e,n,t){o.goExchange=function(){e.go("tabs.integral")},o.$on("$ionicView.beforeEnter",function(){n.hideTabs=!0}),o.person={integralNum:"",integralArray:[]};var r="http://114.112.94.166/sunny/wap/api/uintegral";t.getData(r).then(function(e){if(o.person.integralArray=e.integralData,console.log(o.person.integralArray),o.person.integralArray.length)for(var n=0;n<o.person.integralArray.length;n++)o.person.integralNum+=o.person.integralArray[n].integral,console.log(o.person.integralNum);else o.person.integralNum=0})}]),angular.module("myApp.personOrder",[]).config(["$stateProvider",function(o){o.state("tabs.personOrder",{url:"/personOrder",views:{"tabs-person":{templateUrl:"personOrder.html",controller:"personOrderController"}}})}]).controller("personOrderController",["$scope","$rootScope",function(o,e){o.$on("$ionicView.beforeEnter",function(){e.hideTabs=!0}),o.orderSelect=function(o){var e=angular.element(document.querySelector(".orderTop")).children(),n=angular.element(o.target);e.removeClass("active"),n.addClass("active")}}]),angular.module("myApp.personPay",[]).config(["$stateProvider",function(o){o.state("tabs.personPay",{url:"/personPay",views:{"tabs-person":{templateUrl:"personPay.html",controller:"personPayController"}}})}]).controller("personPayController",["$scope","$rootScope",function(o,e){o.$on("$ionicView.beforeEnter",function(){e.hideTabs=!0})}]),angular.module("myApp.personShoppingCar",[]).config(["$stateProvider",function(o){o.state("tabs.personShoppingCar",{url:"/personShoppingCar",views:{"tabs-person":{templateUrl:"personShoppingCar.html",controller:"personShoppingCarController"}}})}]).controller("personShoppingCarController",["$scope","$rootScope","$ionicPopup","HttpFactory",function(o,e,n,t){o.$on("$ionicView.beforeEnter",function(){e.hideTabs=!0}),o.shop={shoppingCartArray:[]};var r="http://114.112.94.166/sunny/wap/api/ushoppingCart";t.getData(r).then(function(e){console.log(e.shoppingCart[0]),o.shop.shoppingCartArray=e.shoppingCart}),o.SelectAll=!1,o.ifSelectAll=function(){o.SelectAll=!o.SelectAll;for(var e=0;e<o.shop.shoppingCartArray.length;e++)1==o.SelectAll?o.shop.shoppingCartArray[e].Selected=!0:o.shop.shoppingCartArray[e].Selected=!1},o.ifSelected=function(e){o.shop.shoppingCartArray[e].Selected=!o.shop.shoppingCartArray[e].Selected;for(var n=!1,t=0;t<o.shop.shoppingCartArray.length;t++)n=n||o.shop.shoppingCartArray[t].Selected;1==n?o.SelectAll=!0:o.SelectAll=!1},o.goToDetailView=function(){console.log("跳转商品详情页")},o.deleteShopping=function(e){console.log(e);n.show({cssClass:"myOrder",template:"确定要从购物车中删除该商品吗?",scope:o,buttons:[{text:"取消",type:""},{text:"确定",type:"",onTap:function(n){o.shop.shoppingCartArray.splice(e,1)}}]})}}]),angular.module("myApp.tabs",["RongWebIMWidget"]).config(["$stateProvider",function(o){}]).controller("tabsController",["$scope","$rootScope","$state","RongCustomerService",function(o,e,n,t){~function(o,e){var n=o.documentElement,t="orientationchange"in window?"orientationchange":"resize",r=function(){var o=n.clientWidth;o&&(o>=640?n.style.fontSize="20px":n.style.fontSize=10*(o/375)+"px")};o.addEventListener&&(e.addEventListener(t,r,!1),o.addEventListener("DOMContentLoaded",r,!1))}(document,window);var r=document.body.offsetWidth,l=document.body.offsetHeight;t.init({appkey:"n19jmcy5n1aw9",token:"5wPyilUqfiVCKuenjsJMSRqsXqSVwrXS3ow63aC1R0gP1PRKFnyhlYCqB/LQOY1KaZWOXMFfVTN6evEm15oPpg==",customerServiceId:"KEFU148301012322381",style:{width:r,height:l},position:t.Position.right,reminder:" ",onSuccess:function(){var o=angular.element(document.getElementById("rong-widget-minbtn"));o.css("bottom","80px"),o.css("right","30px");var e=angular.element(document.getElementById("rong-sendBtn"));e.css("backgroundColor","deepskyblue");var n=angular.element(document.querySelector(".rongcloud-kefuChat"));n.css({background:'url("../images/icon.png")',backgroundPosition:"-75px"})}}),o.$on("$stateChangeSuccess",function(o,e){var n=angular.element(document.querySelector("#rong-widget-minbtn "));switch(e.url){case"/home":n.css("display","block");break;case"/integral":n.css("display","block");break;case"/homeDetail":n.css("display","block");break;case"/league":n.css("display","none");break;case"/person":n.css("display","none");break;default:n.css("display","none")}})}]),angular.module("myApp.httpFactory",[]).factory("HttpFactory",["$http","$q",function(o,e){return{getData:function(n,t){if(n){var r=e.defer();return t=t?t:"GET",o({url:n,method:t,timeout:2e4}).then(function(o){o=o.data,r.resolve(o)},function(o){r.reject(o)}),r.promise}}}}]),angular.module("myApp.slideBox",[]).directive("mgSlideBox",[function(){return{restrict:"E",scope:{sourceArray:"="},templateUrl:"slideBox.html",controller:["$scope","$ionicSlideBoxDelegate","$element",function(o,e,n){o.goToDetailView=function(o){console.log("进入详情页"+o)},o.$watch("sourceArray",function(n,t){n&&n.length&&(o.isShowSlideBox=!0,e.$getByHandle("topCarouselSlideBox").update(),e.$getByHandle("topCarouselSlideBox").loop(!0))})}],replace:!0,link:function(o,e,n){}}}]);